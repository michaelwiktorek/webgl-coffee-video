(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Graphics, g, set_kernel, start_video, stop_video;

Graphics = require("./gl_util.coffee");

g = null;

window.onload = function() {
  var canvas;
  canvas = document.querySelector('#glcanvas');
  g = new Graphics(canvas);
  document.querySelector('#start_video').onclick = start_video;
  document.querySelector('#stop_video').onclick = stop_video;
  return document.querySelector('#kernels').onchange = set_kernel;
};

start_video = function() {
  return g.start_video();
};

stop_video = function() {
  var vid;
  vid = document.querySelector('video');
  vid.src = '';
  return g.stop_video();
};

set_kernel = function() {
  var list;
  list = document.querySelector('#kernels');
  return g.setKernel(list.value);
};



},{"./gl_util.coffee":2}],2:[function(require,module,exports){
var Graphics,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Graphics = (function() {
  Graphics.anim_id = null;

  Graphics.gl = null;

  Graphics.buffer = null;

  Graphics.program = null;

  Graphics.vid_stream = null;

  Graphics.texture = null;

  Graphics.video = false;

  Graphics.positionLocation = null;

  Graphics.img = null;

  Graphics.vid = null;

  Graphics.kernels = null;

  function Graphics(canvas) {
    this.stop_video = bind(this.stop_video, this);
    this.start_video = bind(this.start_video, this);
    this.init_video = bind(this.init_video, this);
    this.render = bind(this.render, this);
    this.init = bind(this.init, this);
    this.gl = canvas.getContext("webgl") || canvas.getContext("experimental-webgl");
    this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);
    this.kernels = {
      "none": [0, 0, 0, 0, 1, 0, 0, 0, 0],
      "sobelhoriz": [-1, -2, -1, 0, 0, 0, 1, 2, 1],
      "sobelvert": [-1, 0, 1, -2, 0, 2, -1, 0, 1],
      "gaussian": [1, 2, 1, 2, 4, 2, 1, 2, 1],
      "laplacian1": [-2, -2, -2, -2, 16, -2, -2, -2, -2],
      "laplacian3": [-2, 1, -2, 1, 4, 1, -2, 1, -2],
      "emboss": [-2, -1, 0, -1, 1, 1, 0, 1, 2]
    };
  }

  Graphics.prototype.init = function() {
    console.log("init");
    this.gl.clearColor(0.0, 0.0, 0.0, 1.0);
    this.gl.clear(this.gl.COLOR_BUFFER_BIT);
    this.init_shaders();
    return this.anim_id = window.requestAnimationFrame(this.render);
  };

  Graphics.prototype.render = function() {
    this.anim_id = window.requestAnimationFrame(this.render);
    if (this.video) {
      this.update_texture();
      return this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);
    }
  };

  Graphics.prototype.init_shaders = function() {
    var buffer, fragmentShader, positionLocation, resolutionLocation, shaderScript, shaderSource, texCoordBuffer, texCoordLocation, textureSizeLocation, vertexShader;
    shaderScript = document.querySelector("#vert-shader");
    shaderSource = shaderScript.text;
    vertexShader = this.gl.createShader(this.gl.VERTEX_SHADER);
    this.gl.shaderSource(vertexShader, shaderSource);
    this.gl.compileShader(vertexShader);
    shaderScript = document.querySelector("#frag-shader");
    shaderSource = shaderScript.text;
    fragmentShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);
    this.gl.shaderSource(fragmentShader, shaderSource);
    this.gl.compileShader(fragmentShader);
    console.log(this.gl.getShaderInfoLog(fragmentShader));
    this.program = this.gl.createProgram();
    this.gl.attachShader(this.program, vertexShader);
    this.gl.attachShader(this.program, fragmentShader);
    this.gl.linkProgram(this.program);
    this.gl.useProgram(this.program);
    texCoordLocation = this.gl.getAttribLocation(this.program, "a_texCoord");
    positionLocation = this.gl.getAttribLocation(this.program, "a_position");
    texCoordBuffer = this.gl.createBuffer();
    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, texCoordBuffer);
    this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), this.gl.STATIC_DRAW);
    this.gl.enableVertexAttribArray(texCoordLocation);
    this.gl.vertexAttribPointer(texCoordLocation, 2, this.gl.FLOAT, false, 0, 0);
    this.init_textures();
    resolutionLocation = this.gl.getUniformLocation(this.program, "u_resolution");
    this.gl.uniform2f(resolutionLocation, 640, 480);
    buffer = this.gl.createBuffer();
    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);
    this.gl.enableVertexAttribArray(positionLocation);
    this.gl.vertexAttribPointer(positionLocation, 2, this.gl.FLOAT, false, 0, 0);
    textureSizeLocation = this.gl.getUniformLocation(this.program, "u_textureSize");
    this.gl.uniform2f(textureSizeLocation, 640, 480);
    this.setKernel("none");
    return this.setRectangle(0, 0, 640, 480);
  };

  Graphics.prototype.setKernel = function(name) {
    var kernel, kernelLocation;
    console.log("setting kernel");
    kernelLocation = this.gl.getUniformLocation(this.program, "u_kernel[0]");
    kernel = this.kernels[name];
    return this.gl.uniform1fv(kernelLocation, kernel);
  };

  Graphics.prototype.setRectangle = function(x, y, width, height) {
    var x2, y2;
    x2 = x + width;
    y2 = y + height;
    return this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([x, y, x2, y, x, y2, x, y2, x2, y, x2, y2]), this.gl.STATIC_DRAW);
  };

  Graphics.prototype.init_video = function() {
    if (this.vid) {
      this.vid.src = this.vid_stream;
      return this.anim_id = window.requestAnimationFrame(this.render);
    } else {
      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
      this.vid = document.querySelector('video');
      navigator.getUserMedia({
        video: true,
        audio: false
      }, (function(_this) {
        return function(stream) {
          _this.vid_stream = window.URL.createObjectURL(stream);
          return _this.vid.src = _this.vid_stream;
        };
      })(this), function() {
        return alert("error");
      });
      return this.init();
    }
  };

  Graphics.prototype.init_textures = function() {
    this.texture = this.gl.createTexture();
    this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);
    return this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);
  };

  Graphics.prototype.update_texture = function() {
    this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);
    return this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, this.vid);
  };

  Graphics.prototype.start_video = function() {
    if (!this.video) {
      this.init_video();
      return this.video = true;
    }
  };

  Graphics.prototype.stop_video = function() {
    window.cancelAnimationFrame(this.anim_id);
    this.video = false;
    this.gl.clearColor(1.0, 1.0, 1.0, 1.0);
    return this.gl.clear(this.gl.COLOR_BUFFER_BIT);
  };

  return Graphics;

})();

module.exports = Graphics;



},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvbWljaGFlbHdpa3RvcmVrL1NpdGVzL3dlYmdsL3NyYy9tYWluLmNvZmZlZSIsIi9Vc2Vycy9taWNoYWVsd2lrdG9yZWsvU2l0ZXMvd2ViZ2wvc3JjL2dsX3V0aWwuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsSUFBQSxnREFBQTs7QUFBQSxRQUFBLEdBQVcsT0FBQSxDQUFRLGtCQUFSLENBQVgsQ0FBQTs7QUFBQSxDQUNBLEdBQUksSUFESixDQUFBOztBQUFBLE1BR00sQ0FBQyxNQUFQLEdBQWdCLFNBQUEsR0FBQTtBQUNkLE1BQUEsTUFBQTtBQUFBLEVBQUEsTUFBQSxHQUFTLFFBQVEsQ0FBQyxhQUFULENBQXVCLFdBQXZCLENBQVQsQ0FBQTtBQUFBLEVBQ0EsQ0FBQSxHQUFRLElBQUEsUUFBQSxDQUFTLE1BQVQsQ0FEUixDQUFBO0FBQUEsRUFFQSxRQUFRLENBQUMsYUFBVCxDQUF1QixjQUF2QixDQUFzQyxDQUFDLE9BQXZDLEdBQWlELFdBRmpELENBQUE7QUFBQSxFQUdBLFFBQVEsQ0FBQyxhQUFULENBQXVCLGFBQXZCLENBQXFDLENBQUMsT0FBdEMsR0FBZ0QsVUFIaEQsQ0FBQTtTQUlBLFFBQVEsQ0FBQyxhQUFULENBQXVCLFVBQXZCLENBQWtDLENBQUMsUUFBbkMsR0FBOEMsV0FMaEM7QUFBQSxDQUhoQixDQUFBOztBQUFBLFdBVUEsR0FBYyxTQUFBLEdBQUE7U0FDWixDQUFDLENBQUMsV0FBRixDQUFBLEVBRFk7QUFBQSxDQVZkLENBQUE7O0FBQUEsVUFhQSxHQUFhLFNBQUEsR0FBQTtBQUNYLE1BQUEsR0FBQTtBQUFBLEVBQUEsR0FBQSxHQUFNLFFBQVEsQ0FBQyxhQUFULENBQXVCLE9BQXZCLENBQU4sQ0FBQTtBQUFBLEVBQ0EsR0FBRyxDQUFDLEdBQUosR0FBUSxFQURSLENBQUE7U0FF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RUFBQSxDQTlKaEIsQ0FBQTs7QUFBQSxxQkFvS0EsV0FBQSxHQUFhLFNBQUEsR0FBQTtBQUNYLElBQUEsSUFBRyxDQUFBLElBQUssQ0FBQSxLQUFSO0FBQ0UsTUFBQSxJQUFDLENBQUEsVUFBRCxDQUFBLENBQUEsQ0FBQTthQUNBLElBQUMsQ0FBQSxLQUFELEdBQVMsS0FGWDtLQURXO0VBQUEsQ0FwS2IsQ0FBQTs7QUFBQSxxQkF3S0EsVUFBQSxHQUFZLFNBQUEsR0FBQTtBQUNWLElBQUEsTUFBTSxDQUFDLG9CQUFQLENBQTRCLElBQUMsQ0FBQSxPQUE3QixDQUFBLENBQUE7QUFBQSxJQUNBLElBQUMsQ0FBQSxLQUFELEdBQVMsS0FEVCxDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsRUFBRSxDQUFDLFVBQUosQ0FBZSxHQUFmLEVBQW9CLEdBQXBCLEVBQXlCLEdBQXpCLEVBQThCLEdBQTlCLENBRkEsQ0FBQTtXQUdBLElBQUMsQ0FBQSxFQUFFLENBQUMsS0FBSixDQUFVLElBQUMsQ0FBQSxFQUFFLENBQUMsZ0JBQWQsRUFKVTtFQUFBLENBeEtaLENBQUE7O2tCQUFBOztJQURGLENBQUE7O0FBQUEsTUFvTE0sQ0FBQyxPQUFQLEdBQWlCLFFBcExqQixDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIkdyYXBoaWNzID0gcmVxdWlyZSBcIi4vZ2xfdXRpbC5jb2ZmZWVcIlxuZyA9IG51bGxcblxud2luZG93Lm9ubG9hZCA9IC0+XG4gIGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnbGNhbnZhcycpXG4gIGcgPSBuZXcgR3JhcGhpY3MoY2FudmFzKVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnRfdmlkZW8nKS5vbmNsaWNrID0gc3RhcnRfdmlkZW9cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0b3BfdmlkZW8nKS5vbmNsaWNrID0gc3RvcF92aWRlb1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcja2VybmVscycpLm9uY2hhbmdlID0gc2V0X2tlcm5lbFxuXG5zdGFydF92aWRlbyA9IC0+XG4gIGcuc3RhcnRfdmlkZW8oKVxuXG5zdG9wX3ZpZGVvID0gLT5cbiAgdmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndmlkZW8nKVxuICB2aWQuc3JjPScnXG4gIGcuc3RvcF92aWRlbygpXG5cbnNldF9rZXJuZWwgPSAtPlxuICBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2tlcm5lbHMnKVxuICBnLnNldEtlcm5lbChsaXN0LnZhbHVlKVxuXG5cbiAgICAiLCJjbGFzcyBHcmFwaGljc1xuICBAYW5pbV9pZDogbnVsbFxuICBAZ2w6IG51bGxcbiAgQGJ1ZmZlcjogbnVsbCAjIGZvciBvdXIgZHJhd2luZyBzdXJmYWNlXG4gIEBwcm9ncmFtOiBudWxsXG4gIEB2aWRfc3RyZWFtOiBudWxsXG4gIEB0ZXh0dXJlOiBudWxsXG4gIEB2aWRlbzogZmFsc2VcbiAgQHBvc2l0aW9uTG9jYXRpb246IG51bGxcbiAgQGltZzogbnVsbFxuICBAdmlkOiBudWxsICMgdmlkZW8gb2JqZWN0XG4gIEBrZXJuZWxzOiBudWxsXG5cbiAgY29uc3RydWN0b3I6IChjYW52YXMpIC0+XG4gICAgQGdsID0gY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbFwiKSB8fCBjYW52YXMuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiKVxuICAgIEBnbC52aWV3cG9ydCgwLDAsIEBnbC5kcmF3aW5nQnVmZmVyV2lkdGgsIEBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0KVxuICAgIEBrZXJuZWxzID0ge1xuICAgICAgXCJub25lXCI6ICAgICAgIFsgIDAsICAwLCAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgMCwgIDEsICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAwLCAgMCwgIDAgXSxcbiAgICAgIFwic29iZWxob3JpelwiOiBbIC0xLCAtMiwgLTEsXG4gICAgICAgICAgICAgICAgICAgICAgIDAsICAwLCAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgMSwgIDIsICAxIF0sXG4gICAgICBcInNvYmVsdmVydFwiOiAgWyAtMSwgIDAsICAxLFxuICAgICAgICAgICAgICAgICAgICAgIC0yLCAgMCwgIDIsXG4gICAgICAgICAgICAgICAgICAgICAgLTEsICAwLCAgMSBdLFxuICAgICAgXCJnYXVzc2lhblwiOiAgIFsgIDEsICAyLCAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgMiwgIDQsICAyLFxuICAgICAgICAgICAgICAgICAgICAgICAxLCAgMiwgIDEgXSxcbiAgICAgIFwibGFwbGFjaWFuMVwiOiBbIC0yLCAtMiwgLTIsXG4gICAgICAgICAgICAgICAgICAgICAgLTIsICAxNiwgLTIsXG4gICAgICAgICAgICAgICAgICAgICAgLTIsIC0yLCAtMiBdLFxuICAgICAgXCJsYXBsYWNpYW4zXCI6IFsgLTIsICAxLCAtMixcbiAgICAgICAgICAgICAgICAgICAgICAgMSwgIDQsICAxLFxuICAgICAgICAgICAgICAgICAgICAgIC0yLCAgMSwgLTIgXSxcbiAgICAgIFwiZW1ib3NzXCI6ICAgICBbIC0yLCAtMSwgIDAsXG4gICAgICAgICAgICAgICAgICAgICAgLTEsICAxLCAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgMCwgIDEsICAyIF1cbiAgICB9XG4gICAgI0BpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAjQGltZy5zcmMgPSBcIi4uL2ltZy9pbnRlcm5ldHN1cmYuanBnXCJcbiAgICAjQGltZy5vbmxvYWQgPSBAaW5pdFxuXG4gICMgaW5pdGlhbGl6ZSBncmFwaGljc1xuICBpbml0OiA9PlxuICAgIGNvbnNvbGUubG9nKFwiaW5pdFwiKVxuICAgIEBnbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDEuMClcbiAgICBAZ2wuY2xlYXIoQGdsLkNPTE9SX0JVRkZFUl9CSVQpXG5cbiAgICBAaW5pdF9zaGFkZXJzKCkgIyBpbml0aWFsaXplIHNoYWRlcnNcbiAgICBAYW5pbV9pZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoQHJlbmRlcikgICAgICAgIyBiZWdpbiByZW5kZXJpbmdcblxuICByZW5kZXI6ID0+XG4gICAgQGFuaW1faWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKEByZW5kZXIpXG4gICAgaWYgQHZpZGVvXG4gICAgICBAdXBkYXRlX3RleHR1cmUoKVxuICAgICAgIyBAZ2wudGV4SW1hZ2UyRChAZ2wuVEVYVFVSRV8yRCwgMCwgQGdsLlJHQkEsIEBnbC5SR0JBLFxuICAgICAgIyBAZ2wuVU5TSUdORURfQllURSwgQGltZylcbiAgICAgIEBnbC5kcmF3QXJyYXlzKEBnbC5UUklBTkdMRVMsIDAsIDYpXG5cbiAgIyBpbml0aWFsaXplIHNoYWRlcnMgZnJvbSBodG1sXG4gIGluaXRfc2hhZGVyczogLT5cbiAgICBzaGFkZXJTY3JpcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ZlcnQtc2hhZGVyXCIpXG4gICAgc2hhZGVyU291cmNlID0gc2hhZGVyU2NyaXB0LnRleHRcbiAgICB2ZXJ0ZXhTaGFkZXIgPSBAZ2wuY3JlYXRlU2hhZGVyKEBnbC5WRVJURVhfU0hBREVSKVxuICAgIEBnbC5zaGFkZXJTb3VyY2UodmVydGV4U2hhZGVyLCBzaGFkZXJTb3VyY2UpXG4gICAgQGdsLmNvbXBpbGVTaGFkZXIodmVydGV4U2hhZGVyKVxuXG4gICAgc2hhZGVyU2NyaXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmcmFnLXNoYWRlclwiKVxuICAgIHNoYWRlclNvdXJjZSA9IHNoYWRlclNjcmlwdC50ZXh0XG4gICAgZnJhZ21lbnRTaGFkZXIgPSBAZ2wuY3JlYXRlU2hhZGVyKEBnbC5GUkFHTUVOVF9TSEFERVIpXG4gICAgQGdsLnNoYWRlclNvdXJjZShmcmFnbWVudFNoYWRlciwgc2hhZGVyU291cmNlKVxuICAgIEBnbC5jb21waWxlU2hhZGVyKGZyYWdtZW50U2hhZGVyKVxuICAgIGNvbnNvbGUubG9nKEBnbC5nZXRTaGFkZXJJbmZvTG9nKGZyYWdtZW50U2hhZGVyKSlcblxuICAgIEBwcm9ncmFtID0gQGdsLmNyZWF0ZVByb2dyYW0oKVxuICAgIEBnbC5hdHRhY2hTaGFkZXIoQHByb2dyYW0sIHZlcnRleFNoYWRlcilcbiAgICBAZ2wuYXR0YWNoU2hhZGVyKEBwcm9ncmFtLCBmcmFnbWVudFNoYWRlcilcbiAgICBAZ2wubGlua1Byb2dyYW0oQHByb2dyYW0pXG4gICAgQGdsLnVzZVByb2dyYW0oQHByb2dyYW0pXG5cbiAgICB0ZXhDb29yZExvY2F0aW9uID0gQGdsLmdldEF0dHJpYkxvY2F0aW9uKEBwcm9ncmFtLCBcImFfdGV4Q29vcmRcIilcbiAgICBwb3NpdGlvbkxvY2F0aW9uID0gQGdsLmdldEF0dHJpYkxvY2F0aW9uKEBwcm9ncmFtLCBcImFfcG9zaXRpb25cIilcblxuICAgIHRleENvb3JkQnVmZmVyID0gQGdsLmNyZWF0ZUJ1ZmZlcigpXG4gICAgQGdsLmJpbmRCdWZmZXIoQGdsLkFSUkFZX0JVRkZFUiwgdGV4Q29vcmRCdWZmZXIpXG4gICAgQGdsLmJ1ZmZlckRhdGEoQGdsLkFSUkFZX0JVRkZFUiwgXG4gICAgICBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICBbMC4wLCAgMC4wLFxuICAgICAgICAgMS4wLCAgMC4wLFxuICAgICAgICAgMC4wLCAgMS4wLFxuICAgICAgICAgMC4wLCAgMS4wLFxuICAgICAgICAgMS4wLCAgMC4wLFxuICAgICAgICAgMS4wLCAgMS4wXSksIFxuICAgICAgQGdsLlNUQVRJQ19EUkFXKVxuICAgIEBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0ZXhDb29yZExvY2F0aW9uKVxuICAgIEBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRleENvb3JkTG9jYXRpb24sIDIsIEBnbC5GTE9BVCwgZmFsc2UsIDAsIDApXG5cbiAgICBAaW5pdF90ZXh0dXJlcygpXG5cblxuICAgIHJlc29sdXRpb25Mb2NhdGlvbiA9IEBnbC5nZXRVbmlmb3JtTG9jYXRpb24oQHByb2dyYW0sIFwidV9yZXNvbHV0aW9uXCIpXG4gICAgQGdsLnVuaWZvcm0yZihyZXNvbHV0aW9uTG9jYXRpb24sIDY0MCwgNDgwKVxuICAgIGJ1ZmZlciA9IEBnbC5jcmVhdGVCdWZmZXIoKVxuICAgIEBnbC5iaW5kQnVmZmVyKEBnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlcilcbiAgICBAZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb25Mb2NhdGlvbilcbiAgICBAZ2wudmVydGV4QXR0cmliUG9pbnRlcihwb3NpdGlvbkxvY2F0aW9uLCAyLCBAZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKVxuXG4gICAgdGV4dHVyZVNpemVMb2NhdGlvbiA9IEBnbC5nZXRVbmlmb3JtTG9jYXRpb24oQHByb2dyYW0sIFwidV90ZXh0dXJlU2l6ZVwiKVxuICAgIEBnbC51bmlmb3JtMmYodGV4dHVyZVNpemVMb2NhdGlvbiwgNjQwLCA0ODApXG5cbiAgICBAc2V0S2VybmVsKFwibm9uZVwiKVxuXG4gICAgQHNldFJlY3RhbmdsZSgwLCAwLCA2NDAsIDQ4MClcbiAgICAjIEBwb3NpdGlvbkxvY2F0aW9uID0gQGdsLmdldEF0dHJpYkxvY2F0aW9uKEBwcm9ncmFtLCBcImFfcG9zaXRpb25cIilcbiAgICAjIEBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShAcG9zaXRpb25Mb2NhdGlvbilcbiAgICAjIEBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKEBwb3NpdGlvbkxvY2F0aW9uLCAyLCBAZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKVxuXG4gIHNldEtlcm5lbDogKG5hbWUpIC0+XG4gICAgY29uc29sZS5sb2coXCJzZXR0aW5nIGtlcm5lbFwiKVxuICAgIGtlcm5lbExvY2F0aW9uID0gQGdsLmdldFVuaWZvcm1Mb2NhdGlvbihAcHJvZ3JhbSwgXCJ1X2tlcm5lbFswXVwiKVxuICAgIGtlcm5lbCA9IEBrZXJuZWxzW25hbWVdXG4gICAgQGdsLnVuaWZvcm0xZnYoa2VybmVsTG9jYXRpb24sIGtlcm5lbClcblxuICBzZXRSZWN0YW5nbGU6ICh4LCB5LCB3aWR0aCwgaGVpZ2h0KS0+XG4gICAgeDIgPSB4ICsgd2lkdGhcbiAgICB5MiA9IHkgKyBoZWlnaHRcbiAgICBAZ2wuYnVmZmVyRGF0YShAZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgW3gsIHksXG4gICAgICAgeDIsIHksXG4gICAgICAgeCwgeTIsXG4gICAgICAgeCwgeTIsXG4gICAgICAgeDIsIHksXG4gICAgICAgeDIsIHkyXVxuICAgICAgKSwgQGdsLlNUQVRJQ19EUkFXKVxuXG4gIGluaXRfdmlkZW86ID0+XG4gICAgaWYgQHZpZFxuICAgICAgQHZpZC5zcmMgPSBAdmlkX3N0cmVhbVxuICAgICAgQGFuaW1faWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKEByZW5kZXIpXG4gICAgZWxzZVxuICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgb3IgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSBvciBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhXG4gICAgICBAdmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndmlkZW8nKVxuICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSh7dmlkZW86IHRydWUsIGF1ZGlvOiBmYWxzZX0sIFxuICAgICAgICAoc3RyZWFtKT0+XG4gICAgICAgICAgQHZpZF9zdHJlYW0gPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pXG4gICAgICAgICAgQHZpZC5zcmMgPSBAdmlkX3N0cmVhbVxuICAgICAgICAsIC0+XG4gICAgICAgICAgYWxlcnQgXCJlcnJvclwiKVxuICAgICAgQGluaXQoKVxuXG4gIGluaXRfdGV4dHVyZXM6IC0+XG4gICAgQHRleHR1cmUgPSBAZ2wuY3JlYXRlVGV4dHVyZSgpXG4gICAgQGdsLmJpbmRUZXh0dXJlKEBnbC5URVhUVVJFXzJELCBAdGV4dHVyZSlcbiAgICBAZ2wudGV4UGFyYW1ldGVyaShAZ2wuVEVYVFVSRV8yRCwgQGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgQGdsLkxJTkVBUilcbiAgICBAZ2wudGV4UGFyYW1ldGVyaShAZ2wuVEVYVFVSRV8yRCwgQGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgQGdsLkxJTkVBUilcbiAgICBAZ2wudGV4UGFyYW1ldGVyaShAZ2wuVEVYVFVSRV8yRCwgQGdsLlRFWFRVUkVfV1JBUF9TLCBAZ2wuQ0xBTVBfVE9fRURHRSkgXG4gICAgQGdsLnRleFBhcmFtZXRlcmkoQGdsLlRFWFRVUkVfMkQsIEBnbC5URVhUVVJFX1dSQVBfVCwgQGdsLkNMQU1QX1RPX0VER0UpIFxuXG4gIHVwZGF0ZV90ZXh0dXJlOiAtPlxuICAgIEBnbC5iaW5kVGV4dHVyZShAZ2wuVEVYVFVSRV8yRCwgQHRleHR1cmUpXG4gICAgI0BnbC5waXhlbFN0b3JlaShAZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCwgdHJ1ZSlcbiAgICBAZ2wudGV4SW1hZ2UyRChAZ2wuVEVYVFVSRV8yRCwgMCwgQGdsLlJHQkEsIEBnbC5SR0JBLFxuICAgICAgQGdsLlVOU0lHTkVEX0JZVEUsIEB2aWQpXG5cbiAgc3RhcnRfdmlkZW86ID0+XG4gICAgaWYgbm90IEB2aWRlb1xuICAgICAgQGluaXRfdmlkZW8oKVxuICAgICAgQHZpZGVvID0gdHJ1ZVxuICBzdG9wX3ZpZGVvOiA9PlxuICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShAYW5pbV9pZClcbiAgICBAdmlkZW8gPSBmYWxzZVxuICAgIEBnbC5jbGVhckNvbG9yKDEuMCwgMS4wLCAxLjAsIDEuMClcbiAgICBAZ2wuY2xlYXIoQGdsLkNPTE9SX0JVRkZFUl9CSVQpXG5cblxuXG4gICAgXG5cblxubW9kdWxlLmV4cG9ydHMgPSBHcmFwaGljcyJdfQ==
