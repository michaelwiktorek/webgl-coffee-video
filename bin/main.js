(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Graphics, g, set_kernel, start_video, stop_video;

Graphics = require("./gl_util.coffee");

g = null;

window.onload = function() {
  var canvas;
  canvas = document.querySelector('#glcanvas');
  g = new Graphics(canvas);
  document.querySelector('#start_video').onclick = start_video;
  document.querySelector('#stop_video').onclick = stop_video;
  return document.querySelector('#kernels').onchange = set_kernel;
};

start_video = function() {
  return g.start_video();
};

stop_video = function() {
  var vid;
  vid = document.querySelector('video');
  vid.src = '';
  return g.stop_video();
};

set_kernel = function() {
  var list;
  list = document.querySelector('#kernels');
  return g.setKernel(list.value);
};



},{"./gl_util.coffee":2}],2:[function(require,module,exports){
var Graphics,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Graphics = (function() {
  Graphics.anim_id = null;

  Graphics.gl = null;

  Graphics.buffer = null;

  Graphics.program = null;

  Graphics.vid_stream = null;

  Graphics.texture = null;

  Graphics.video = false;

  Graphics.positionLocation = null;

  Graphics.img = null;

  Graphics.vid = null;

  Graphics.kernels = null;

  function Graphics(canvas) {
    this.stop_video = bind(this.stop_video, this);
    this.start_video = bind(this.start_video, this);
    this.init_video = bind(this.init_video, this);
    this.render = bind(this.render, this);
    this.init = bind(this.init, this);
    this.gl = canvas.getContext("webgl") || canvas.getContext("experimental-webgl");
    this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);
    this.kernels = {
      "none": [0, 0, 0, 0, 1, 0, 0, 0, 0],
      "sobelhoriz": [-1, -2, -1, 0, 0, 0, 1, 2, 1],
      "sobelvert": [-1, 0, 1, -2, 0, 2, -1, 0, 1],
      "gaussian": [1, 2, 1, 2, 4, 2, 1, 2, 1],
      "laplacian1": [-1, -1, -1, -1, 8, -1, -1, -1, -1],
      "laplacian2": [0, -1, 0, -1, 4, -1, 0, -1, 0],
      "laplacian3": [-2, 1, -2, 1, 4, 1, -2, 1, -2],
      "laplacian4": [1, -2, 1, -2, 4, -2, 1, -2, 1]
    };
  }

  Graphics.prototype.init = function() {
    console.log("init");
    this.gl.clearColor(0.0, 0.0, 0.0, 1.0);
    this.gl.clear(this.gl.COLOR_BUFFER_BIT);
    this.init_shaders();
    return this.anim_id = window.requestAnimationFrame(this.render);
  };

  Graphics.prototype.render = function() {
    this.anim_id = window.requestAnimationFrame(this.render);
    if (this.video) {
      this.update_texture();
      return this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);
    }
  };

  Graphics.prototype.init_shaders = function() {
    var buffer, fragmentShader, positionLocation, resolutionLocation, shaderScript, shaderSource, texCoordBuffer, texCoordLocation, textureSizeLocation, vertexShader;
    shaderScript = document.querySelector("#vert-shader");
    shaderSource = shaderScript.text;
    vertexShader = this.gl.createShader(this.gl.VERTEX_SHADER);
    this.gl.shaderSource(vertexShader, shaderSource);
    this.gl.compileShader(vertexShader);
    shaderScript = document.querySelector("#frag-shader");
    shaderSource = shaderScript.text;
    fragmentShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);
    this.gl.shaderSource(fragmentShader, shaderSource);
    this.gl.compileShader(fragmentShader);
    console.log(this.gl.getShaderInfoLog(fragmentShader));
    this.program = this.gl.createProgram();
    this.gl.attachShader(this.program, vertexShader);
    this.gl.attachShader(this.program, fragmentShader);
    this.gl.linkProgram(this.program);
    this.gl.useProgram(this.program);
    texCoordLocation = this.gl.getAttribLocation(this.program, "a_texCoord");
    positionLocation = this.gl.getAttribLocation(this.program, "a_position");
    texCoordBuffer = this.gl.createBuffer();
    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, texCoordBuffer);
    this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), this.gl.STATIC_DRAW);
    this.gl.enableVertexAttribArray(texCoordLocation);
    this.gl.vertexAttribPointer(texCoordLocation, 2, this.gl.FLOAT, false, 0, 0);
    this.init_textures();
    resolutionLocation = this.gl.getUniformLocation(this.program, "u_resolution");
    this.gl.uniform2f(resolutionLocation, 640, 480);
    buffer = this.gl.createBuffer();
    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);
    this.gl.enableVertexAttribArray(positionLocation);
    this.gl.vertexAttribPointer(positionLocation, 2, this.gl.FLOAT, false, 0, 0);
    textureSizeLocation = this.gl.getUniformLocation(this.program, "u_textureSize");
    this.gl.uniform2f(textureSizeLocation, 640, 480);
    this.setKernel("none");
    return this.setRectangle(0, 0, 640, 480);
  };

  Graphics.prototype.setKernel = function(name) {
    var kernel, kernelLocation;
    console.log("setting kernel");
    kernelLocation = this.gl.getUniformLocation(this.program, "u_kernel[0]");
    kernel = this.kernels[name];
    return this.gl.uniform1fv(kernelLocation, kernel);
  };

  Graphics.prototype.setRectangle = function(x, y, width, height) {
    var x2, y2;
    x2 = x + width;
    y2 = y + height;
    return this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([x, y, x2, y, x, y2, x, y2, x2, y, x2, y2]), this.gl.STATIC_DRAW);
  };

  Graphics.prototype.init_video = function() {
    if (this.vid) {
      this.vid.src = this.vid_stream;
      return this.anim_id = window.requestAnimationFrame(this.render);
    } else {
      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
      this.vid = document.querySelector('video');
      navigator.getUserMedia({
        video: true,
        audio: false
      }, (function(_this) {
        return function(stream) {
          _this.vid_stream = window.URL.createObjectURL(stream);
          return _this.vid.src = _this.vid_stream;
        };
      })(this), function() {
        return alert("error");
      });
      return this.init();
    }
  };

  Graphics.prototype.init_textures = function() {
    this.texture = this.gl.createTexture();
    this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);
    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);
    return this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);
  };

  Graphics.prototype.update_texture = function() {
    this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);
    return this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, this.vid);
  };

  Graphics.prototype.start_video = function() {
    if (!this.video) {
      this.init_video();
      return this.video = true;
    }
  };

  Graphics.prototype.stop_video = function() {
    window.cancelAnimationFrame(this.anim_id);
    this.video = false;
    this.gl.clearColor(1.0, 1.0, 1.0, 1.0);
    return this.gl.clear(this.gl.COLOR_BUFFER_BIT);
  };

  return Graphics;

})();

module.exports = Graphics;



},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvbWljaGFlbHdpa3RvcmVrL1NpdGVzL3dlYmdsL3NyYy9tYWluLmNvZmZlZSIsIi9Vc2Vycy9taWNoYWVsd2lrdG9yZWsvU2l0ZXMvd2ViZ2wvc3JjL2dsX3V0aWwuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsSUFBQSxnREFBQTs7QUFBQSxRQUFBLEdBQVcsT0FBQSxDQUFRLGtCQUFSLENBQVgsQ0FBQTs7QUFBQSxDQUNBLEdBQUksSUFESixDQUFBOztBQUFBLE1BR00sQ0FBQyxNQUFQLEdBQWdCLFNBQUEsR0FBQTtBQUNkLE1BQUEsTUFBQTtBQUFBLEVBQUEsTUFBQSxHQUFTLFFBQVEsQ0FBQyxhQUFULENBQXVCLFdBQXZCLENBQVQsQ0FBQTtBQUFBLEVBQ0EsQ0FBQSxHQUFRLElBQUEsUUFBQSxDQUFTLE1BQVQsQ0FEUixDQUFBO0FBQUEsRUFFQSxRQUFRLENBQUMsYUFBVCxDQUF1QixjQUF2QixDQUFzQyxDQUFDLE9BQXZDLEdBQWlELFdBRmpELENBQUE7QUFBQSxFQUdBLFFBQVEsQ0FBQyxhQUFULENBQXVCLGFBQXZCLENBQXFDLENBQUMsT0FBdEMsR0FBZ0QsVUFIaEQsQ0FBQTtTQUlBLFFBQVEsQ0FBQyxhQUFULENBQXVCLFVBQXZCLENBQWtDLENBQUMsUUFBbkMsR0FBOEMsV0FMaEM7QUFBQSxDQUhoQixDQUFBOztBQUFBLFdBVUEsR0FBYyxTQUFBLEdBQUE7U0FDWixDQUFDLENBQUMsV0FBRixDQUFBLEVBRFk7QUFBQSxDQVZkLENBQUE7O0FBQUEsVUFhQSxHQUFhLFNBQUEsR0FBQTtBQUNYLE1BQUEsR0FBQTtBQUFBLEVBQUEsR0FBQSxHQUFNLFFBQVEsQ0FBQyxhQUFULENBQXVCLE9BQXZCLENBQU4sQ0FBQTtBQUFBLEVBQ0EsR0FBRyxDQUFDLEdBQUosR0FBUSxFQURSLENBQUE7U0FF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QUMsVUFBbkIsRUFBK0IsQ0FBL0IsRUFBa0MsSUFBQyxDQUFBLEVBQUUsQ0FBQyxJQUF0QyxFQUE0QyxJQUFDLENBQUEsRUFBRSxDQUFDLElBQWhELEVBQ0UsSUFBQyxDQUFBLEVBQUUsQ0FBQyxhQUROLEVBQ3FCLElBQUMsQ0FBQSxHQUR0QixFQUhjO0VBQUEsQ0FqS2hCLENBQUE7O0FBQUEscUJBdUtBLFdBQUEsR0FBYSxTQUFBLEdBQUE7QUFDWCxJQUFBLElBQUcsQ0FBQSxJQUFLLENBQUEsS0FBUjtBQUNFLE1BQUEsSUFBQyxDQUFBLFVBQUQsQ0FBQSxDQUFBLENBQUE7YUFDQSxJQUFDLENBQUEsS0FBRCxHQUFTLEtBRlg7S0FEVztFQUFBLENBdktiLENBQUE7O0FBQUEscUJBMktBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixJQUFBLE1BQU0sQ0FBQyxvQkFBUCxDQUE0QixJQUFDLENBQUEsT0FBN0IsQ0FBQSxDQUFBO0FBQUEsSUFDQSxJQUFDLENBQUEsS0FBRCxHQUFTLEtBRFQsQ0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxVQUFKLENBQWUsR0FBZixFQUFvQixHQUFwQixFQUF5QixHQUF6QixFQUE4QixHQUE5QixDQUZBLENBQUE7V0FHQSxJQUFDLENBQUEsRUFBRSxDQUFDLEtBQUosQ0FBVSxJQUFDLENBQUEsRUFBRSxDQUFDLGdCQUFkLEVBSlU7RUFBQSxDQTNLWixDQUFBOztrQkFBQTs7SUFERixDQUFBOztBQUFBLE1BdUxNLENBQUMsT0FBUCxHQUFpQixRQXZMakIsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJHcmFwaGljcyA9IHJlcXVpcmUgXCIuL2dsX3V0aWwuY29mZmVlXCJcbmcgPSBudWxsXG5cbndpbmRvdy5vbmxvYWQgPSAtPlxuICBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2xjYW52YXMnKVxuICBnID0gbmV3IEdyYXBoaWNzKGNhbnZhcylcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0YXJ0X3ZpZGVvJykub25jbGljayA9IHN0YXJ0X3ZpZGVvXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdG9wX3ZpZGVvJykub25jbGljayA9IHN0b3BfdmlkZW9cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2tlcm5lbHMnKS5vbmNoYW5nZSA9IHNldF9rZXJuZWxcblxuc3RhcnRfdmlkZW8gPSAtPlxuICBnLnN0YXJ0X3ZpZGVvKClcblxuc3RvcF92aWRlbyA9IC0+XG4gIHZpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvJylcbiAgdmlkLnNyYz0nJ1xuICBnLnN0b3BfdmlkZW8oKVxuXG5zZXRfa2VybmVsID0gLT5cbiAgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNrZXJuZWxzJylcbiAgZy5zZXRLZXJuZWwobGlzdC52YWx1ZSlcblxuXG4gICAgIiwiY2xhc3MgR3JhcGhpY3NcbiAgQGFuaW1faWQ6IG51bGxcbiAgQGdsOiBudWxsXG4gIEBidWZmZXI6IG51bGwgIyBmb3Igb3VyIGRyYXdpbmcgc3VyZmFjZVxuICBAcHJvZ3JhbTogbnVsbFxuICBAdmlkX3N0cmVhbTogbnVsbFxuICBAdGV4dHVyZTogbnVsbFxuICBAdmlkZW86IGZhbHNlXG4gIEBwb3NpdGlvbkxvY2F0aW9uOiBudWxsXG4gIEBpbWc6IG51bGxcbiAgQHZpZDogbnVsbCAjIHZpZGVvIG9iamVjdFxuICBAa2VybmVsczogbnVsbFxuXG4gIGNvbnN0cnVjdG9yOiAoY2FudmFzKSAtPlxuICAgIEBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2xcIikgfHwgY2FudmFzLmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIilcbiAgICBAZ2wudmlld3BvcnQoMCwwLCBAZ2wuZHJhd2luZ0J1ZmZlcldpZHRoLCBAZ2wuZHJhd2luZ0J1ZmZlckhlaWdodClcbiAgICBAa2VybmVscyA9IHtcbiAgICAgIFwibm9uZVwiOiAgICAgICBbICAwLCAgMCwgIDAsXG4gICAgICAgICAgICAgICAgICAgICAgIDAsICAxLCAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgMCwgIDAsICAwIF0sXG4gICAgICBcInNvYmVsaG9yaXpcIjogWyAtMSwgLTIsIC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAwLCAgMCwgIDAsXG4gICAgICAgICAgICAgICAgICAgICAgIDEsICAyLCAgMSBdLFxuICAgICAgXCJzb2JlbHZlcnRcIjogIFsgLTEsICAwLCAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAtMiwgIDAsICAyLFxuICAgICAgICAgICAgICAgICAgICAgIC0xLCAgMCwgIDEgXSxcbiAgICAgIFwiZ2F1c3NpYW5cIjogICBbICAxLCAgMiwgIDEsXG4gICAgICAgICAgICAgICAgICAgICAgIDIsICA0LCAgMixcbiAgICAgICAgICAgICAgICAgICAgICAgMSwgIDIsICAxIF0sXG4gICAgICBcImxhcGxhY2lhbjFcIjogWyAtMSwgLTEsIC0xLFxuICAgICAgICAgICAgICAgICAgICAgIC0xLCAgOCwgLTEsXG4gICAgICAgICAgICAgICAgICAgICAgLTEsIC0xLCAtMSBdLFxuICAgICAgXCJsYXBsYWNpYW4yXCI6IFsgIDAsIC0xLCAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAtMSwgIDQsIC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAwLCAtMSwgIDAgXSxcbiAgICAgIFwibGFwbGFjaWFuM1wiOiBbIC0yLCAgMSwgLTIsXG4gICAgICAgICAgICAgICAgICAgICAgIDEsICA0LCAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAtMiwgIDEsIC0yIF0sXG4gICAgICBcImxhcGxhY2lhbjRcIjogWyAgMSwgLTIsICAxLFxuICAgICAgICAgICAgICAgICAgICAgIC0yLCAgNCwgLTIsXG4gICAgICAgICAgICAgICAgICAgICAgIDEsIC0yLCAgMSBdXG4gICAgfVxuICAgICNAaW1nID0gbmV3IEltYWdlKCk7XG4gICAgI0BpbWcuc3JjID0gXCIuLi9pbWcvaW50ZXJuZXRzdXJmLmpwZ1wiXG4gICAgI0BpbWcub25sb2FkID0gQGluaXRcblxuICAjIGluaXRpYWxpemUgZ3JhcGhpY3NcbiAgaW5pdDogPT5cbiAgICBjb25zb2xlLmxvZyhcImluaXRcIilcbiAgICBAZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAxLjApXG4gICAgQGdsLmNsZWFyKEBnbC5DT0xPUl9CVUZGRVJfQklUKVxuXG4gICAgQGluaXRfc2hhZGVycygpICMgaW5pdGlhbGl6ZSBzaGFkZXJzXG4gICAgQGFuaW1faWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKEByZW5kZXIpICAgICAgICMgYmVnaW4gcmVuZGVyaW5nXG5cbiAgcmVuZGVyOiA9PlxuICAgIEBhbmltX2lkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShAcmVuZGVyKVxuICAgIGlmIEB2aWRlb1xuICAgICAgQHVwZGF0ZV90ZXh0dXJlKClcbiAgICAgICMgQGdsLnRleEltYWdlMkQoQGdsLlRFWFRVUkVfMkQsIDAsIEBnbC5SR0JBLCBAZ2wuUkdCQSxcbiAgICAgICMgQGdsLlVOU0lHTkVEX0JZVEUsIEBpbWcpXG4gICAgICBAZ2wuZHJhd0FycmF5cyhAZ2wuVFJJQU5HTEVTLCAwLCA2KVxuXG4gICMgaW5pdGlhbGl6ZSBzaGFkZXJzIGZyb20gaHRtbFxuICBpbml0X3NoYWRlcnM6IC0+XG4gICAgc2hhZGVyU2NyaXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2ZXJ0LXNoYWRlclwiKVxuICAgIHNoYWRlclNvdXJjZSA9IHNoYWRlclNjcmlwdC50ZXh0XG4gICAgdmVydGV4U2hhZGVyID0gQGdsLmNyZWF0ZVNoYWRlcihAZ2wuVkVSVEVYX1NIQURFUilcbiAgICBAZ2wuc2hhZGVyU291cmNlKHZlcnRleFNoYWRlciwgc2hhZGVyU291cmNlKVxuICAgIEBnbC5jb21waWxlU2hhZGVyKHZlcnRleFNoYWRlcilcblxuICAgIHNoYWRlclNjcmlwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZnJhZy1zaGFkZXJcIilcbiAgICBzaGFkZXJTb3VyY2UgPSBzaGFkZXJTY3JpcHQudGV4dFxuICAgIGZyYWdtZW50U2hhZGVyID0gQGdsLmNyZWF0ZVNoYWRlcihAZ2wuRlJBR01FTlRfU0hBREVSKVxuICAgIEBnbC5zaGFkZXJTb3VyY2UoZnJhZ21lbnRTaGFkZXIsIHNoYWRlclNvdXJjZSlcbiAgICBAZ2wuY29tcGlsZVNoYWRlcihmcmFnbWVudFNoYWRlcilcbiAgICBjb25zb2xlLmxvZyhAZ2wuZ2V0U2hhZGVySW5mb0xvZyhmcmFnbWVudFNoYWRlcikpXG5cbiAgICBAcHJvZ3JhbSA9IEBnbC5jcmVhdGVQcm9ncmFtKClcbiAgICBAZ2wuYXR0YWNoU2hhZGVyKEBwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpXG4gICAgQGdsLmF0dGFjaFNoYWRlcihAcHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpXG4gICAgQGdsLmxpbmtQcm9ncmFtKEBwcm9ncmFtKVxuICAgIEBnbC51c2VQcm9ncmFtKEBwcm9ncmFtKVxuXG4gICAgdGV4Q29vcmRMb2NhdGlvbiA9IEBnbC5nZXRBdHRyaWJMb2NhdGlvbihAcHJvZ3JhbSwgXCJhX3RleENvb3JkXCIpXG4gICAgcG9zaXRpb25Mb2NhdGlvbiA9IEBnbC5nZXRBdHRyaWJMb2NhdGlvbihAcHJvZ3JhbSwgXCJhX3Bvc2l0aW9uXCIpXG5cbiAgICB0ZXhDb29yZEJ1ZmZlciA9IEBnbC5jcmVhdGVCdWZmZXIoKVxuICAgIEBnbC5iaW5kQnVmZmVyKEBnbC5BUlJBWV9CVUZGRVIsIHRleENvb3JkQnVmZmVyKVxuICAgIEBnbC5idWZmZXJEYXRhKEBnbC5BUlJBWV9CVUZGRVIsIFxuICAgICAgbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgWzAuMCwgIDAuMCxcbiAgICAgICAgIDEuMCwgIDAuMCxcbiAgICAgICAgIDAuMCwgIDEuMCxcbiAgICAgICAgIDAuMCwgIDEuMCxcbiAgICAgICAgIDEuMCwgIDAuMCxcbiAgICAgICAgIDEuMCwgIDEuMF0pLCBcbiAgICAgIEBnbC5TVEFUSUNfRFJBVylcbiAgICBAZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGV4Q29vcmRMb2NhdGlvbilcbiAgICBAZ2wudmVydGV4QXR0cmliUG9pbnRlcih0ZXhDb29yZExvY2F0aW9uLCAyLCBAZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKVxuXG4gICAgQGluaXRfdGV4dHVyZXMoKVxuXG5cbiAgICByZXNvbHV0aW9uTG9jYXRpb24gPSBAZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKEBwcm9ncmFtLCBcInVfcmVzb2x1dGlvblwiKVxuICAgIEBnbC51bmlmb3JtMmYocmVzb2x1dGlvbkxvY2F0aW9uLCA2NDAsIDQ4MClcbiAgICBidWZmZXIgPSBAZ2wuY3JlYXRlQnVmZmVyKClcbiAgICBAZ2wuYmluZEJ1ZmZlcihAZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpXG4gICAgQGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc2l0aW9uTG9jYXRpb24pXG4gICAgQGdsLnZlcnRleEF0dHJpYlBvaW50ZXIocG9zaXRpb25Mb2NhdGlvbiwgMiwgQGdsLkZMT0FULCBmYWxzZSwgMCwgMClcblxuICAgIHRleHR1cmVTaXplTG9jYXRpb24gPSBAZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKEBwcm9ncmFtLCBcInVfdGV4dHVyZVNpemVcIilcbiAgICBAZ2wudW5pZm9ybTJmKHRleHR1cmVTaXplTG9jYXRpb24sIDY0MCwgNDgwKVxuXG4gICAgQHNldEtlcm5lbChcIm5vbmVcIilcblxuICAgIEBzZXRSZWN0YW5nbGUoMCwgMCwgNjQwLCA0ODApXG4gICAgIyBAcG9zaXRpb25Mb2NhdGlvbiA9IEBnbC5nZXRBdHRyaWJMb2NhdGlvbihAcHJvZ3JhbSwgXCJhX3Bvc2l0aW9uXCIpXG4gICAgIyBAZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoQHBvc2l0aW9uTG9jYXRpb24pXG4gICAgIyBAZ2wudmVydGV4QXR0cmliUG9pbnRlcihAcG9zaXRpb25Mb2NhdGlvbiwgMiwgQGdsLkZMT0FULCBmYWxzZSwgMCwgMClcblxuICBzZXRLZXJuZWw6IChuYW1lKSAtPlxuICAgIGNvbnNvbGUubG9nKFwic2V0dGluZyBrZXJuZWxcIilcbiAgICBrZXJuZWxMb2NhdGlvbiA9IEBnbC5nZXRVbmlmb3JtTG9jYXRpb24oQHByb2dyYW0sIFwidV9rZXJuZWxbMF1cIilcbiAgICBrZXJuZWwgPSBAa2VybmVsc1tuYW1lXVxuICAgIEBnbC51bmlmb3JtMWZ2KGtlcm5lbExvY2F0aW9uLCBrZXJuZWwpXG5cbiAgc2V0UmVjdGFuZ2xlOiAoeCwgeSwgd2lkdGgsIGhlaWdodCktPlxuICAgIHgyID0geCArIHdpZHRoXG4gICAgeTIgPSB5ICsgaGVpZ2h0XG4gICAgQGdsLmJ1ZmZlckRhdGEoQGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShcbiAgICAgIFt4LCB5LFxuICAgICAgIHgyLCB5LFxuICAgICAgIHgsIHkyLFxuICAgICAgIHgsIHkyLFxuICAgICAgIHgyLCB5LFxuICAgICAgIHgyLCB5Ml1cbiAgICAgICksIEBnbC5TVEFUSUNfRFJBVylcblxuICBpbml0X3ZpZGVvOiA9PlxuICAgIGlmIEB2aWRcbiAgICAgIEB2aWQuc3JjID0gQHZpZF9zdHJlYW1cbiAgICAgIEBhbmltX2lkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShAcmVuZGVyKVxuICAgIGVsc2VcbiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIG9yIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgb3IgbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYVxuICAgICAgQHZpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvJylcbiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoe3ZpZGVvOiB0cnVlLCBhdWRpbzogZmFsc2V9LCBcbiAgICAgICAgKHN0cmVhbSk9PlxuICAgICAgICAgIEB2aWRfc3RyZWFtID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKVxuICAgICAgICAgIEB2aWQuc3JjID0gQHZpZF9zdHJlYW1cbiAgICAgICAgLCAtPlxuICAgICAgICAgIGFsZXJ0IFwiZXJyb3JcIilcbiAgICAgIEBpbml0KClcblxuICBpbml0X3RleHR1cmVzOiAtPlxuICAgIEB0ZXh0dXJlID0gQGdsLmNyZWF0ZVRleHR1cmUoKVxuICAgIEBnbC5iaW5kVGV4dHVyZShAZ2wuVEVYVFVSRV8yRCwgQHRleHR1cmUpXG4gICAgQGdsLnRleFBhcmFtZXRlcmkoQGdsLlRFWFRVUkVfMkQsIEBnbC5URVhUVVJFX01BR19GSUxURVIsIEBnbC5MSU5FQVIpXG4gICAgQGdsLnRleFBhcmFtZXRlcmkoQGdsLlRFWFRVUkVfMkQsIEBnbC5URVhUVVJFX01JTl9GSUxURVIsIEBnbC5MSU5FQVIpXG4gICAgQGdsLnRleFBhcmFtZXRlcmkoQGdsLlRFWFRVUkVfMkQsIEBnbC5URVhUVVJFX1dSQVBfUywgQGdsLkNMQU1QX1RPX0VER0UpIFxuICAgIEBnbC50ZXhQYXJhbWV0ZXJpKEBnbC5URVhUVVJFXzJELCBAZ2wuVEVYVFVSRV9XUkFQX1QsIEBnbC5DTEFNUF9UT19FREdFKSBcblxuICB1cGRhdGVfdGV4dHVyZTogLT5cbiAgICBAZ2wuYmluZFRleHR1cmUoQGdsLlRFWFRVUkVfMkQsIEB0ZXh0dXJlKVxuICAgICNAZ2wucGl4ZWxTdG9yZWkoQGdsLlVOUEFDS19GTElQX1lfV0VCR0wsIHRydWUpXG4gICAgQGdsLnRleEltYWdlMkQoQGdsLlRFWFRVUkVfMkQsIDAsIEBnbC5SR0JBLCBAZ2wuUkdCQSxcbiAgICAgIEBnbC5VTlNJR05FRF9CWVRFLCBAdmlkKVxuXG4gIHN0YXJ0X3ZpZGVvOiA9PlxuICAgIGlmIG5vdCBAdmlkZW9cbiAgICAgIEBpbml0X3ZpZGVvKClcbiAgICAgIEB2aWRlbyA9IHRydWVcbiAgc3RvcF92aWRlbzogPT5cbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoQGFuaW1faWQpXG4gICAgQHZpZGVvID0gZmFsc2VcbiAgICBAZ2wuY2xlYXJDb2xvcigxLjAsIDEuMCwgMS4wLCAxLjApXG4gICAgQGdsLmNsZWFyKEBnbC5DT0xPUl9CVUZGRVJfQklUKVxuXG5cblxuICAgIFxuXG5cbm1vZHVsZS5leHBvcnRzID0gR3JhcGhpY3MiXX0=
